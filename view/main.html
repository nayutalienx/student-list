
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    <title>Список студентов</title>
  </head>
  <body>
    <div class="container mt-4">
      
<form action="<?=htmlspecialchars($config['domen'])?>" method="GET">
      <div class="d-flex d-flex justify-content-between">
        <div class="mr-auto"><h4><a href="<?=htmlspecialchars($config['domen'])?>" style="text-decoration: none; color: black;">Список студентов</a></h4></div>
        
        <div class="mr-1 align-self-center"><input type="text" class="text p-1" name="search" value="<?=htmlspecialchars($searchQuery)?>" placeholder="Поиск"></div>
        <div class="align-self-center"><button type="submit" class="btn btn-dark">Искать!</button></div> 
      </div>
      </form>
      <table class="table mt-5">
        <thead class="thead-dark">
          <tr>
            <th scope="col"><a href="<?=htmlspecialchars($sort_links['first_name'])?>" style="text-decoration: none; color: white;">Имя</a></th>
            <th scope="col"><a href="<?=htmlspecialchars($sort_links['last_name'])?>" style="text-decoration: none; color: white;">Фамилия</a></th>
            <th scope="col"><a href="<?=htmlspecialchars($sort_links['group_id'])?>" style="text-decoration: none; color: white;">Группа</a></th>
            <th scope="col"><a href="<?=htmlspecialchars($sort_links['rating'])?>" style="text-decoration: none; color: white;">Балл</a></th>
          </tr>
        </thead>
        <tbody>
          <?php if($students): ?>
              <?php foreach($students as $student): ?>
              <tr>
                <td><?=htmlspecialchars($student->first_name)?></td>
                <td><?=htmlspecialchars($student->last_name)?></td>
                <td><?=htmlspecialchars($student->group_id)?></td>
                <td><?=htmlspecialchars($student->rating)?></td>
              </tr>
              <?php endforeach;?>
          <?php endif;?>
        </tbody>
      </table>
      <div class="d-flex p-2 bg-dark mt-5 align-items-center" style="color:white;">
        <div class="p-2">Страницы</div>
                <?php if($allLinks): ?>
                  <?php foreach($allLinks as $link): ?>
                    <div class="p-2"><a href="<?=htmlspecialchars($link['link'])?>" style="<?=htmlspecialchars($link['underline'])?>"><?=htmlspecialchars($link['page'])?></a></div>
                  <?php endforeach;?>
                <?php endif;?> 
                <button type="button" class="btn btn-secondary btn-sm ml-auto" onclick="location.href = '<?=htmlspecialchars($last_page)?>';">Последняя страница</button>
                <button class="btn btn-secondary btn-sm ml-1" data-toggle="modal" data-target="#add">Редактировать информацию о себе</button>      
      </div>




  <div class="modal fade" id="add" tabindex="-1" role="dialog" aria-labelledby="registerLabel" aria-hidden="false">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="registerLabel">Информация о вас</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <div id="errors"></div>
                      <form >
                      <div class="form-group">
                       <input type="text" name="first_name" placeholder="Имя" value="<?=htmlspecialchars($user['first_name'])?>" class="form-control">
                        <input type="text" name="last_name" placeholder="Фамилия" value="<?=htmlspecialchars($user['last_name'])?>" class="form-control mt-3">
                        <input type="text" name="group_id" placeholder="Номер группы" value="<?=htmlspecialchars($user['group_id'])?>" class="form-control mt-3">
                        <input type="text" name="rating" placeholder="Балл" value="<?=htmlspecialchars($user['rating'])?>" class="form-control mt-3">
                        <input type="text" name="email" placeholder="Email" value="<?=htmlspecialchars($user['email'])?>" class="form-control mt-3">
                        <label for="inputDate" class="mt-2">Дата рождения:</label>
                        <input type="date" name="birthday" value="<?=htmlspecialchars($user['birthday'])?>" class="form-control mt-1">
                        <select name="sex"  class="form-control mt-3">
                          <option id="male">Мужчина</option>
                          <option id="female">Женщина</option>
                        </select>
                        <select name="local"  class="form-control mt-3">
                          <option id="native">Местный</option>
                          <option id="not_native">Иногородний</option>
                        </select>

                       

                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" name="update" id="update_button" class="btn btn-dark">Обновить</button>
                    </div>
                    </form>
                  </div>
                </div>
      </div>





     

    </div>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="js/cookie.js"></script>
    <script src="js/script.js"></script>
    
  </body>
</html>